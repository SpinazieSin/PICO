pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

function _init()
	nx = 1
	ny = 1
	dnx = 0.7/8
	dny = 0.7/8
	
	objs = {}
	particles = {}
	add_player()
end

function _update()
	plr = objs[1]
	if (btn(4)) add_particle(flr(rnd(16)+1), plr.x+5, plr.y+4)
	
	for obj in all(objs) do
		obj:update()
	end
end

function _draw()
	cls()
	
	for obj in all(objs) do
		obj:draw()
	end
end
-->8

function add_player()
 x = x or 1
 y = y or 1
	add(objs, {
		x = x,
		y = y,
		draw = function(self, x, y)
			x = x or self.x
			y = y or self.y
			spr(1, x, y)
		end,
		update = function(self)
			if (btn(0)) self.x -= 1
			if (btn(1)) self.x += 1
			if (btn(2)) self.y -= 1
			if (btn(3)) self.y += 1
		end
		})
end

function add_particle(clr, x, y, r, dx, dy, lifespan)
	clr = clr or flr(rnd(16))
	x = x or 63
	y = y or 63
	r = r or flr(rnd(3.9))+1
	dx = dx or rnd(3)-1.5
	dy = dy or rnd(3)-1.5
	lifespan = lifespan or rnd(5)+5
	add(objs, {
		x = x,
		y = y,
  r = r,
		dx = dx,
		dy = dy,
		life = lifespan,
		draw = function(self, x, y)
			x = x or self.x
			y = y or self.y
			self.r -= 0.2
			circfill(x, y, self.r, clr)
		end,
		update = function(self)
			self.x += self.dx
			self.y += self.dy
   self.r -= 0.1
			self.life -= 1
			if self.life < 0 then
				self.dx = self.dx/2
				self.dy = self.dy/2
			end
			if self.dx < 0.05 and self.dy < 0.05 then
				del(objs, self)
			end
		end})
end

function update_player()

end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066660000666600000000000088880000888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
006997900069979000066660008222200087dd780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0601999006019990066997900801222000dcddcd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001d1100001d110000199900001d11000dcddcd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00011110000111100001d1100001111000dcddcd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000100000001000001111000000100000dddd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000001000000010000001010000001000000dd000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009797900066666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009999900097979000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000d111d00099999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000011111000d111d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000101000011111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000101000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0808080808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
