pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
	plr_x = 50
	plr_y = 75
	sprint_speed = 1

--sprite animations init
		ani_plr=7
-- particle effect list init
		pcls = {}
--adjust colors to new pallete
	poke(0x5f2e, 1)
	for i in all({1,3,5,6,11,12,15}) do
		pal(i, 128+i, 1)
	end
-- init color vars for different races
	col_a = 12
	col_n = 8
	edge_pos_x = 63
	edge_pos_y = 63
	wall_id = 1
end

function _update()
--camera controls
	plr_dx = 0
	plr_dy = 0
	
	if btn(4) then
			wall_id = 0	
			--[[particle effect attack ANIMAL BASE 13,12,14
			add_particle(1, nil, nil, 3,nil,nil, 1)
			for _=1,4 do
			add_particle(flr(rnd(1.9)+col_a), nil, nil, flr(rnd(1.9)+1), nil, nil, rnd(.9)+1)
			end	
			--particle effect attack NETWORK
			add_particle(5, nil, nil, 3,nil,nil, 1) 4,5,9,10
			for _=1,4 do
			add_particle(flr(rnd(1.9)+col_n), nil, nil, flr(rnd(1.9)+1), nil, nil, rnd(.9)+1)
			end				
			--particle for terrain growth/reduction edges
			for _=1,2 do
			add_particle(flr(rnd(2.9)+4), rnd(3.9)+edge_pos_x, rnd(3.9)+edge_pos_y, flr(rnd(.9)+.2),0,rnd(2)-1,5, rnd(30)+10)
			add_particle(flr(rnd(1.9)+1), rnd(3.9)+edge_pos_x, rnd(3.9)+edge_pos_y, flr(rnd(.9)+.2),0,rnd(2)-1,5, rnd(30)+10)
			add_particle(0, rnd(3.9)+edge_pos_x, rnd(3.9)+edge_pos_y, flr(rnd(.9)+.5),0,rnd(2)-1,5, rnd(30)+10)
			end		
			--particle for merging units, for network use col_b and for the second particle use color 10			
			for _=1,20 do
			add_particle(flr(rnd(1.9)+col_a), nil, nil, flr(rnd(6.9)+1), rnd(2)-1, rnd(2)-1, rnd(1.3)+1)
			end	
			for _=1,20 do
			add_particle(14, nil, nil, flr(rnd(1.9)+1), nil, nil, rnd(.9)+1.5)
			end	
			]]
			--particle effect for death
			--particle for merging units, for network use col_b and for the second particle use color 10
			
			for _=1,10 do
			add_particle(0, nil, edge_pos_y -6, flr(rnd(5.9)+1), rnd(2.3)-1, rnd(1.9)+1, rnd(1.2)+.2)
			end	
			for _=1,20 do
			add_particle(7, nil, nil, flr(rnd(1.9)+1), 0, nil, rnd(1.9)+1.5)
			end		
			for _=1,20 do
			add_particle(7, nil, edge_pos_y -2, flr(rnd(1.9)+1), nil, 0, rnd(1.9)+1.5)
			end		

	end
	if btn(5) and not(sprint_speed < 2) then
		sprint_speed -= 1
		wall_id = 1
	end
	if btn(0) and not(plr_col(-1, 0) or plr_col(-1, 4) or plr_col(-1,7)) then
		plr_x -= sprint_speed
	end
	if btn(1) and not(plr_col(8, 0) or plr_col(8, 4) or plr_col(8,7)) then
		plr_x += sprint_speed
	end
	if btn(2) and not(plr_col(0, -1) or plr_col(4, -1) or plr_col(7,-1)) then 
		plr_y -= sprint_speed
	end
	if btn(3) and not(plr_col(0, 8) or plr_col(4, 8) or plr_col(7,8)) then
		plr_y += sprint_speed
	end
	camera(plr_x-63, plr_y-63)
--sprite animations
	ani_plr+=0.0625
	if ani_plr > 8.9 then
			ani_plr= 7
	end
	for pcl in all(pcls) do
		pcl:update()
	end
end

function _draw()
	cls(0)	
	map(0, 0, 0, 0, 128, 128)
	for pcl in all(pcls) do
		pcl:draw()
	end
	spr(ani_plr, plr_x, plr_y)	
end
-->8
function plr_col(x, y)
	return (fget(mget((plr_x+x)/8, (plr_y+y)/8), wall_id))
end
-->8
function add_particle(clr, x, y, r, dx, dy, lifespan)
	clr = clr or flr(rnd(16))
	x = x or 63
	y = y or 63
	r = r or flr(rnd(2.9))+1
	dx = dx or rnd(3)-1.5
	dy = dy or rnd(3)-1.5
	lifespan = lifespan or rnd(5)+5
	add(pcls, {
		x = x,
		y = y,
		r = r,
		dx = dx,
		dy = dy,
		life = lifespan,
		draw = function(self, x, y)
			x = x or self.x
			y = y or self.y
			circfill(x, y, self.r, clr)
		end,
		update = function(self)
			self.x += self.dx
			self.y += self.dy
			self.r -= 0.2
			self.life -= 1
			if self.life < 0 then
				self.dx = self.dx/1.5
				self.dy = self.dy/1.5
			end
			if abs(self.dx) < 0.05 and abs(self.dy) < 0.05 then
				del(pcls, self)
			end
		end})
end
-->8
--test vfx go here
--[[walk vfx
for _=1,20 do
			add_particle(6,(plr_x+6),(plr_y+8),flr(rnd(.9))+1.2,rnd(1)-1,rnd(1)-1)
		end
		for _=1,20 do
			add_particle(5,(plr_x+6),(plr_y+8),flr(rnd(.9))+.9,rnd(1)-1,rnd(1)-1)
		end
		]]
__gfx__
00010000000010000000000000000007000001b0000000000009000000000000000000000000000000000000003cc00000000000000000000000000000000000
001c10000011b1100000b000000010c1001111b1000000000000009900000000000000000100001010ccc0013ccccc0000000000000000000000000000000000
0171710000100010000101000011b0c101bbbbb1009000000000009a00000000000000000c0cc0c00c7dd7c003cc12c0000ee000000ee0000000000000000000
1c777c1001b070b10010701001bbbcc101bccc11000a099090aa0000000ccc00000000000c7dd7000ce22e0000cdd2000000e000000e00000000000000000000
c71717c0001000100b07070b1bbccc1001b77c100988aa900aaaaa0000cc1c20000ccc000ce22e0000cccc000c0000c0000ee00ccccce0000000000000000000
77c1c7700011b110011111111b0c110011bbbc100a8a8aa0a88faa9000ceec2000cc1c200cccccc000c00c00cc0000cc000eecccccccc000000eeee000ee0000
1c101c1000001000000010001b0100001ccccc1099888a9998a899900ccccc0000ceec20cc0000cc0cc00cc0c100001c000eccccc1cccc0000e0eeeccccce000
010001000000000000000000700000000c111100099a99990888990000c000000ccccc00110000110110011010000001000cccc11ccc2c0000e00cccc1ccc000
bb0000bb000000000000000000000000000000000000000000a000000000000000000000000000999900000001000010000eccccccc222c00000cccccccccc00
b000000b00000000000000000000000000000000000a0000088faa00000000000008880000009999a99900001c0000c100cceeccccccccc0000cccc11ccc2c00
00000000000000000000000000000000000000000988aa0008a899a00888000000005880000999999a990000cc0000cc00cceeccdddcccc0000cccccccc222c0
00000000000000000000000000008000000000000a8a8aa0a8889a9a00588000000888800009999999990000c000000c00cccccddddddc0000ceccccccccccc0
00000000000000000000000000088800000080009a888a990a99a9a908888000000009900888889999990000c03cc0c0000ccccddddddc0000cceeccccccccc0
000000000000000000000000008a0a8000088800099a999909009009009900000000aa0080008889999900000cccccc0000cccdddddddc000ccceecccddccc00
b000000b00000000000000000099f990008a0a80990990900090090900aa000000aa0000080008899990000033cc1200000ccccccccccc00ccccccdddddddcc0
bb0000bb0000000000000000080000008099f99090090090009009090009aa0900900900008888999900000000cdd200000c001111000c00ccc1cdddddddddcc
0000000000000000000000000088800000888000000000000000000000000000000000000009499990000000000000000d000100000000000000000000000000
0000000000000000000000000000800000800000088800000008880000008888000000000094499900000000000000000ddd0011100000000000000000000000
00000000000000000000000000008000008000000098000000089000000800088000000009449990000000000000000000dddd01111000000000000000000000
000000000000000000000000000000000000000009080000000809000000800088990000094999099a900000000000000d0ddddd111100000000000000000000
0000000000000000000000008800000000000880099000000000990000000888889900000949909999a000000000000000ddccdd3c1100000000000000000000
0000000000000000000000000890000000009800009990080099900000000998899a90000949999999a00000000000000d0dddcddc3332200000000000000000
00000000000000000000000000099000009900000008999999980000000000999999a00009949999099000000000000000d0cddddc3773200000000000000000
0000000000000000000000000009989998990000000999aaa9999000000009449999900000944440009490000000000000dddd3cd3c3d3200000000000000000
000000000000000000000000008899898998800000999a88fa999900000099499999000000000000000000000000000000011c3cd3cc3020000ddddd3c110000
000000000000000000000000009999aaa999990009998a808a899990000094499990000000000000000000000000000000011c3c3c3002000ddd1dddc3c33322
00000000000000000000000009999a88fa9999900999aa888aa9999000094499900000000000000000000000000000000001113c3c0000000001ddddd3c37732
0000000000000000000000000998aa808aa8999009989999999899900094499009aaa0000000000000000000000000000011100000000000dddddddcd3cc3d32
0000000000000000000000000999aa888aa9999000999999999999000944990099999a0000000000000000000000000000111000001000000011ddcddc3c3302
000000000000000000000000098899999998890000000000000000000449909999999990000000000000000000000000001111111100000001111ddc3c3c0020
00000000000000000000000000000999990000000000000000000000949999999990094000000000000000000000000000011111100000000111013c3c000000
00000000000000000000000000000000000000000000000000000000944444949900009000000000000000000000000000000000000000000011111111000000
00000000000000000000000000000000000000000000000000000000000000000000000022222222222222220000000000000000455555661455555400000000
000000000000000000000000000000000000000000000000000000000000000000000000222dd220024000e20000000000000000555556001066655600000000
000000000000000000000000000000000000000000000000000000001001000000000000225a5222055110620000000000000000655660001001065600000000
000000000000000000000000000000000000000000000000000000101001100000000000202425526a5555020000000000000000006000101001101000000000
00000000000000000000000000000000000000000000000000001121010010100000000022000665222552010000000000000000110011210100101000000000
00000000000000000000000000000000000000000000000001012222121121110000000054110002222222110000000000000000010122221211211100000000
0000000000000000000000000000000000000000000000000012d2222e2222110000000022edd12220025a5200000000000000000012d2222e22221100000000
000000000000000000000000000000000000000000000000022222ee2de22de1000000002222222d210255520000000000000000022222ee2de22de100000000
00000000000000000000000000000000000000000000000022222ee222ddd222000000005522502255545555000000000012e212222222ed2ddee2d21e22e100
0000000000000000000000000000000000000000000000001221222212222121000000004545200225555555000000001122de2222e22edd222dd2222d22de11
00000000000000000000000000000000000000000000000001100111001110100000000059a2222225e0654500000000022222222ee22dd22222222222222220
0000000000000000000000000000000000000000000000000011010000000010000000005555652255500555000000000122dee22de222222ee222ee22eeed10
00000000000000000000000000000000000000000000000000000000001111110000000022550066555522550000000001e2dddddddee22eedde22dd22dddd10
00000000000000000000000000000000000000000000000000000000000000000000000022221000000522520000000011dd2dd2ddddd22ddd22edd22eed2100
0000000000000000000000000000000000000000000000000000000000000000000000002005552d211455520000000000122e2222d222222222d2222de22211
00000000000000000000000000000000000000000000000000000000000000000000000055555222249994450000000011112d21e22222d222edd22d2122dd10
000000000000000000000000000000000000000000000000000000005554455555544445222ee2222eedd222222222220000000022222ee222ddd22200000000
00000000000000000000000000000000000000000000000000000000555554445449aaa522ddde222dde22222222222200000000122122221222212100000000
00000000000000000000000000000000000001100011101000000000555555495499999422ddd22de22222222222222200000000011001110011101000000000
00000000000000000000000000000000001101000000001000000000455555495544444522222222dd22222d2222222200000000001101000000001000000000
000000000000000000000000000000000006660661111111000000004555554444555555222deee2d22222222222222200000000000666066111111100000000
00000000000000000000000000000000056555655001165000000000a4555554aa445499de22dde2222222de2222222200000000056555655001165000000000
0000000000000000000000000000000065555555566065460000000094555554999454992222ddd22222ee2d2222222200000000655555555660654600000000
00000000000000000000000000000000555444555440554900000000944555554445554422222222222ddd2d2222222200000000555444555440554900000000
00000000000000000000000000000000455555661455555400000000aa944445545554452edee22222eddd22555555550006546555549a454996554455644600
00000000000000000000000000000000555556001066655600000000445555554a4559942ddde2222222d22d555555551165599455549a45444555455449aa61
00000000000000000000000000000000655660001001065600000000555555459a4549942ddddee22222222255555555006549945549995555559aa554999600
00000000000000000000000000000000006000001001101000000000555555559a4549a422ddddd22222222255555555164549a455444455554999a455444460
0000000000000000000000000000000011001001010010100000000055555555445549a4222dddd22222222255555555065549a4555555555549999444555561
0000000000000000000000000000000001010000001100010000000055555555555544452de2dd22222222225555555500654445455549a555444445aa445490
0000000000000000000000000000000000100000000000010000000055445555455555442dd2222d22edde2255555555065555444555499a4555555599945600
00000000000000000000000000000000000000000000000000000000549994459455555522de2e222eddddd25555555511655555555449944994555544455611
__map__
007e677e6868687e7e7e7e687777777e07000000000000000000000046474747474747464747474747474747470000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0067676767687e7d4d4e7d7d777777780000000000000000004647005c69696969697a7a7a7a7a7a6b6b6b6b6b4d68686868686800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
006767676868684d5d5d4e7d7d7d7e7d0000000000000000005657005c696b6b6b5d7a7a7a7a696a6a6b6b6b6b7c7c687b7b686800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007d676868684d5d5e5e5e4e4e4e4d4e0000000000000000000000005c696b6b6b6a6a6a6a6a6a6a6a6a6b6b6b7c6868687b7b6800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007d7d7d4d4d5d5d5d5d7a79795d5d5d0000000000000000000000005c696b6b6a6a7a6a6a79697a796a796b6b7c6868787b686800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
004d4e4d5d5e7a5d7a5d5d7a696a5d790000000000000000004647005c695d6b6a7a6a696a5d6b69696a6949497c68687878676800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
005d5d5e5d5d5d5d5d5d5d5d79695f5d0000000000000000005657005c697a6a7a6a795d5d6b6b69696a5a495a7c5a686778686800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000495a4a5d5d5d5d5d5d5d5d594a490000000000000000000000005c697a6a6a796b6a6b6b6b696a69695a5a7c5a686778786800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005a7c6d6d6d6e6e6e6d6e6d6d7f5a0000000000000000000000005c696a696b795d6b6b696b6a696d6d6d6d685a686778786800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007c7d7d7d7d5a7d685a7d7d687d7f0000000000000000000000005c696a696b6b6a6b6b6a6a69697c68685a5a59686778686800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007c7d7d7d5a7d7d7d7d7d737d7d7f0000000000000000000000005c7a6a6b6b6b6b6b6a6a7a69697c6878787868686768686800000000004647000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000727300626300626300000000000000000000000000000000005c69796b6a6b6a6a6a7a6969697c7878686868787877777700004647005657000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000727300727300000000000000000000000000000000005c7a696a6a6a7a69696969696d7778686867677b7877777700005657000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c7a7a6a6a697a696d6d6d6d6d7777786867677b7877777700000000004647000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c697a7a7a7a69697c7777777777677867677b7b7878777700000000005657000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c697a7a7a7a69697c777777777878787b7b7b7b7b78777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c696b7a697a69697c77777878787b7b7b7b7b7b7b78777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c696b6b6b6b69697c777878677b7b78787878787b78777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c696969696969697c77786867787878787777777877777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c696969696d6d6d7777777867677777787877777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c696969697c77777777777877676777777878777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000005c696969697c77776777777777777777777777777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000056575757577c77777777777777777777777777777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000007777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
