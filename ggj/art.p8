pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
	plr_x = 133
	plr_y = 75
	sprint_speed = 1

--sprite animations init
	ani_water=1
	ani_plr=64
--adjust colors to new pallete
	poke(0x5f2e, 1)
	for i in all({1,3,5,6,11,12,15}) do
		pal(i, 128+i, 1)
	end
	
	wall_id = 1
end

function _update()
--camera controls
	plr_dx = 0
	plr_dy = 0
	
	if btn(4) then
		sprint_speed += 1
		wall_id = 0
	end
	if btn(5) and not(sprint_speed < 2) then
		sprint_speed -= 1
		wall_id = 1
	end
	if btn(0) and not(plr_col(-1, 0) or plr_col(-1, 4) or plr_col(-1,7)) then
		plr_x -= sprint_speed
	end
	if btn(1) and not(plr_col(8, 0) or plr_col(8, 4) or plr_col(8,7)) then
		plr_x += sprint_speed
	end
	if btn(2) and not(plr_col(0, -1) or plr_col(4, -1) or plr_col(7,-1)) then 
		plr_y -= sprint_speed
	end
	if btn(3) and not(plr_col(0, 8) or plr_col(4, 8) or plr_col(7,8)) then
		plr_y += sprint_speed
	end
	camera(plr_x-63, plr_y-63)
--sprite animations
	ani_water+=0.0625
	if ani_water > 2.9 then
			ani_water=1
	end
	ani_plr+=0.0625
	if ani_plr > 65.9 then
			ani_plr=64
	end
end

function _draw()
	cls()	
	map(0, 0, 0, 0, 128, 128)
	spr(ani_plr, plr_x, plr_y)	
end
-->8
function plr_col(x, y)
	return (fget(mget((plr_x+x)/8, (plr_y+y)/8), wall_id))
end
__gfx__
00010000000010000000000000000007000001b000000000000900000000000000000000000000000000000000ccc00000000000000000000000000000000000
001c10000011b1100000b000000010c1001111b1000000000000009900000000000000000100001010ccc0010c7dd7c000000000000000000000000000000000
0171710000100010000101000011b0c101bbbbb1009000000000009a000ccc00000000000c0cc0c00c7dd7c00ce22e00000ee000000ee0000000000000000000
1c777c1001b070b10010701001bbbcc101bccc11000a099090aa000000cc1c20000ccc000c7dd7000ce22e0000cc2c000000e000000e00000000000000000000
c71717c0001000100b07070b1bbccc1001b77c100988aa900aaaaa0000ceec2000cc1c200ce22e0000cc2c000c0000c0000ee00ccccce0000000000000000000
77c1c7700011b110011111111b0c110011bbbc100a8a8aa0a88faa900ccccc0000ceec200ccc2cc000c00c00cc0000cc000eecccccccc000000eeee000ee0000
1c101c1000001000000010001b0100001ccccc1099888a9998a8999000c000000ccccc00cc0000cc0cc00cc0c100001c000eccccc1cccc0000e0eeeccccce000
010001000000000000000000700000000c111100099a9999088899000000000000000000110000110110011010000001000cccc11ccc2c0000e00cccc1ccc000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000010000eccccccc222c00000cccccccccc00
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c0000c100cceeccccccccc0000cccc11ccc2c00
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cc0000cc00cceeccdddcccc0000cccccccc222c0
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000c00cccccddddddc0000ceccccccccccc0
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0ccc0c0000ccccddddddc0000cceeccccccccc0
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c7dd7c0000cccdddddddc000ccceecccddccc00
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ce22e00000ccccccccccc00ccccccdddddddcc0
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cc2c00000c001111000c00ccc1cdddddddddcc
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000100000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddd0011100000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddd01111000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0ddddd111100000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddccdd3c1100000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0dddcddc3332200000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0cddddc3773200000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddd3cd3c3d3200000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011c3cd3cc3020000ddddd3c110000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011c3c3c3002000ddd1dddc3c33322
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001113c3c0000000001ddddd3c37732
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011100000000000dddddddcd3cc3d32
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111000001000000011ddcddc3c3302
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111100000001111ddc3c3c0020
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111100000000111013c3c000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111000000
66666666666666665555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666665555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666646665555f55544ff5555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
646666444666466655544f54444ff555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
666666464666444655554455444f5555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666644466666665555555544445555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666665555555555455555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6666666666666666555fff5555555555000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000
666666666666466655444f555ffff555000000000005555000000000000000000000000000000000000000000000000000000000000000000000000000000000
6644446666664666554444544444f555000550000005555500000000000000000000000000000000000000000000000000000000000000000000000000000000
66466666664446665554455444444555005555500055555500000000000000000000000000000000000000000000000000000000000000000000000000000000
66466666666666665555555544445555005555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000
664666646666666655554f5554455555005555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000
6666666666666666555444f555555555000555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666665555545555555555000055000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666666666665555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddddddddddd2222222222e22222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddd111ddddddddd2ddee22222222e22000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddddddddddd2dddeee2d2222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddddd2ddddd22ddeee222222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddddddddd2d2dddd22ddddd22dee2222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddddddddd12111dd22e2dd22dddeee22000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddd2ddddddddddd22222222ddddee22000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddd2d2dddddddddd2d22222dddddd22e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dd1121ddddddd111222e22dddd222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddddddddddd2222e2222222de22000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddddd2ddddd222deeeee222dde2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddddddddd2d2dddd222dddddee22dde2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddd11211ddde2222ddddd2dddd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddddd22f22d222222ddd22dddd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
111ddddddddddddd222e222dd2d22dd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
dddddddddddddddd2222222222222e22000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
