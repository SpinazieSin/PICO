pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
	plr_x = 133
	plr_y = 75
	sprint_speed = 1

--sprite animations init
	ani_water=1
	ani_plr=64
--adjust colors to new pallete
	poke(0x5f2e, 1)
	for i in all({1,3,5,6,11,12,15}) do
		pal(i, 128+i, 1)
	end
	
	wall_id = 1
end

function _update()
--camera controls
	plr_dx = 0
	plr_dy = 0
	
	if btn(4) then
		sprint_speed += 1
		wall_id = 0
	end
	if btn(5) and not(sprint_speed < 2) then
		sprint_speed -= 1
		wall_id = 1
	end
	if btn(0) and not(plr_col(-1, 0) or plr_col(-1, 4) or plr_col(-1,7)) then
		plr_x -= sprint_speed
	end
	if btn(1) and not(plr_col(8, 0) or plr_col(8, 4) or plr_col(8,7)) then
		plr_x += sprint_speed
	end
	if btn(2) and not(plr_col(0, -1) or plr_col(4, -1) or plr_col(7,-1)) then 
		plr_y -= sprint_speed
	end
	if btn(3) and not(plr_col(0, 8) or plr_col(4, 8) or plr_col(7,8)) then
		plr_y += sprint_speed
	end
	camera(plr_x-63, plr_y-63)
--sprite animations
	ani_water+=0.0625
	if ani_water > 2.9 then
			ani_water=1
	end
	ani_plr+=0.0625
	if ani_plr > 65.9 then
			ani_plr=64
	end
end

function _draw()
	cls(6)	
	map(0, 0, 0, 0, 128, 128)
	spr(ani_plr, plr_x, plr_y)	
end
-->8
function plr_col(x, y)
	return (fget(mget((plr_x+x)/8, (plr_y+y)/8), wall_id))
end
__gfx__
00010000000010000000000000000007000001b0000000000009000000000000000000000000000000000000003cc00000000000000000000000000000000000
001c10000011b1100000b000000010c1001111b1000000000000009900000000000000000100001010ccc0013ccccc0000000000000000000000000000000000
0171710000100010000101000011b0c101bbbbb1009000000000009a00000000000000000c0cc0c00c7dd7c003cc12c0000ee000000ee0000000000000000000
1c777c1001b070b10010701001bbbcc101bccc11000a099090aa0000000ccc00000000000c7dd7000ce22e0000cdd2000000e000000e00000000000000000000
c71717c0001000100b07070b1bbccc1001b77c100988aa900aaaaa0000cc1c20000ccc000ce22e0000cccc000c0000c0000ee00ccccce0000000000000000000
77c1c7700011b110011111111b0c110011bbbc100a8a8aa0a88faa9000ceec2000cc1c200cccccc000c00c00cc0000cc000eecccccccc000000eeee000ee0000
1c101c1000001000000010001b0100001ccccc1099888a9998a899900ccccc0000ceec20cc0000cc0cc00cc0c100001c000eccccc1cccc0000e0eeeccccce000
010001000000000000000000700000000c111100099a999908889900000000000ccccc00110000110110011010000001000cccc11ccc2c0000e00cccc1ccc000
00000000000000000000000000000000000000000000000000a000000000000000000000000000999900000001000010000eccccccc222c00000cccccccccc00
0000000000000000000000000000000000000000000a0000088faa00000000000008880000009999a99900001c0000c100cceeccccccccc0000cccc11ccc2c00
00000000000000000000000000000000000000000988aa0008a899a00888000000005880000999999a990000cc0000cc00cceeccdddcccc0000cccccccc222c0
00000000000000000000000000000000000000000a8a8aa0a8889a9a00588000000888800009999999990000c000000c00cccccddddddc0000ceccccccccccc0
0000000000000000000000000000a000000000009a888a990a99a9a908888000000009900888889999990000c03cc0c0000ccccddddddc0000cceeccccccccc0
0000000000000000000000000088000000009900099a999909009009009900000000aa0080008889999900000cccccc0000cccdddddddc000ccceecccddccc00
00000000000000000000000000899a0000a88900990990900090090900aa000000aa0000080008899990000033cc1200000ccccccccccc00ccccccdddddddcc0
000000000000000000000000000089000089000090090090009009090009aa0900900900008888999900000000cdd200000c001111000c00ccc1cdddddddddcc
0000000000000000000000000088800000888000000000000000000000000000000000000009499990000000000000000d000100000000000000000000000000
0000000000000000000000000000800000800000088800000008880000008888000000000094499900000000000000000ddd0011100000000000000000000000
00000000000000000000000000008000008000000098000000089000000800088000000009449990000000000000000000dddd01111000000000000000000000
000000000000000000000000000000000000000009080000000809000000800088990000094999099a900000000000000d0ddddd111100000000000000000000
0000000000000000000000008800000000000880099000000000990000000888889900000949909999a000000000000000ddccdd3c1100000000000000000000
0000000000000000000000000890000000009800009990080099900000000998899a90000949999999a00000000000000d0dddcddc3332200000000000000000
00000000000000000000000000099000009900000008999999980000000000999999a00009949999099000000000000000d0cddddc3773200000000000000000
0000000000000000000000000009989998990000000999aaa9999000000009449999900000944440009490000000000000dddd3cd3c3d3200000000000000000
000000000000000000000000008899898998800000999a88fa999900000099499999000000000000000000000000000000011c3cd3cc3020000ddddd3c110000
000000000000000000000000009999aaa999990009998a808a899990000094499990000000000000000000000000000000011c3c3c3002000ddd1dddc3c33322
00000000000000000000000009999a88fa9999900999aa888aa9999000094499900000000000000000000000000000000001113c3c0000000001ddddd3c37732
0000000000000000000000000998aa808aa8999009989999999899900094499009aaa0000000000000000000000000000011100000000000dddddddcd3cc3d32
0000000000000000000000000999aa888aa9999000999999999999000944990099999a0000000000000000000000000000111000001000000011ddcddc3c3302
000000000000000000000000098899999998890000000000000000000449909999999990000000000000000000000000001111111100000001111ddc3c3c0020
00000000000000000000000000000999990000000000000000000000949999999990094000000000000000000000000000011111100000000111013c3c000000
00000000000000000000000000000000000000000000000000000000944444949900009000000000000000000000000000000000000000000011111111000000
66666666666666665555555555555555000000000000000000000000000000000000000000000000000000000000000000000000455555660455555455544445
6666666666666666555555555555555500000000000000000000000000000000000000000000000000000000000000000000000055555600006665565449aaa5
66666666666646665555f55544ff5555000000000000000000000000000000000000000000000000000000000000000000000000655660000000065654999994
646666444666466655544f54444ff555000000000000000000000000000000000000000000000000000000000000000000000000006000100000000055444445
666666464666444655554455444f5555000000000000000000000000000000000000000000000000000000000000000000000000000011210100100044555555
666666444666666655555555444455550000000000000000000000000000000000000000000000000000000000000000000000000001222212112100aa445499
666666666666666655555555554555550000000000000000000000000000000000000000000000000000000000000000000000000012d2222e22221099945499
6666666666666666555fff5555555555000000000000005000000000000000000000000000000000000000000000000000000000022222ee2de22de144455544
666666666666466655444f555ffff555000000000005555000000000000000000000000000000000000000000000000000000000222222ed2ddee2d254555445
6644446666664666554444544444f55500055000000555550000000000000000000000000000000000000000000000000000000022e22edd222dd2224a455994
664666666644466655544554444445550055555000555555000000000000000000000000000000000000000000000000000000002ee22dd2222222229a454994
664666666666666655555555444455550055555555555555000000000000000000000000000000000000000000000000000000002de222222ee222ee9a4549a4
664666646666666655554f5554455555005555555555555500000000000000000000000000000000000000000000000000000000dddee22eedde22dd445549a4
6666666666666666555444f555555555000555555555555000000000000000000000000000000000000000000000000000000000ddddd22ddd22edd255554445
6666666666666666555554555555555500005500000000000000000000000000000000000000000000000000000000000000000022d222222222d22245555544
66666666666666665555555555555555000000000000000000000000000000000000000000000000000000000000000000000000e22222d222edd22d94555555
dddddddddddddddd2222222222e2222200000000000000000000000000000000000000000000000000000000000000000000000022222ee222ddd22200000000
dddd111ddddddddd2ddee22222222e22000000000000000000000000000000000000000000000000000000000000000000000000122122221222212100000000
dddddddddddddddd2dddeee2d2222222000000000000000000000000000000000000000000000000000000000000000000000000011001110011101000000000
dddddddddd2ddddd22ddeee222222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ddddddddd2d2dddd22ddddd22dee2222000000000000000000000000000000000000000000000000000000000000000000000000000666066000000600000000
ddddddddd12111dd22e2dd22dddeee22000000000000000000000000000000000000000000000000000000000000000000000000056555655000065500000000
dddd2ddddddddddd22222222ddddee22000000000000000000000000000000000000000000000000000000000000000000000000655555555660654900000000
ddd2d2dddddddddd2d22222dddddd22e000000000000000000000000000000000000000000000000000000000000000000000000555444555440554900000000
dd1121ddddddd111222e22dddd22222200000000000000000000000000000000000000000000000000000000000000000000000055549a454996554400000000
dddddddddddddddd2222e2222222de2200000000000000000000000000000000000000000000000000000000000000000000000055549a454445554500000000
dddddddddd2ddddd222deeeee222dde20000000000000000000000000000000000000000000000000000000000000000000000005549995555559aa500000000
ddddddddd2d2dddd222dddddee22dde200000000000000000000000000000000000000000000000000000000000000000000000055444455554999a400000000
dddddddd11211ddde2222ddddd2dddd2000000000000000000000000000000000000000000000000000000000000000000000000555555555549999400000000
dddddddddd22f22d222222ddd22dddd2000000000000000000000000000000000000000000000000000000000000000000000000455549a55544444500000000
111ddddddddddddd222e222dd2d22dd20000000000000000000000000000000000000000000000000000000000000000000000004555499a4555555500000000
dddddddddddddddd2222222222222e22000000000000000000000000000000000000000000000000000000000000000000000000555449944994555500000000
__map__
005f5f5f5f5f5f5f5f5f5f5f5f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
005f5f4f4f4f4f5f4d4e4f5f5f0b0c0d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
005f5f4f4f4f5f4d5d5d4e4f5f071c1d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
005f5f5f4f5f4d5d5d5e5e4e4e4e4d4e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
005f5f4f4d4d725e5e5e5e5d5d5d5d5d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
004d4e4d5d5e5e5e5e626362635d5d5d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
005d5d5e5e5e735e5e727372735d5d5d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000076263626362636263626362630000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000007273727372737262727372730000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000626362636363626263626362630000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000727363737373727273727372730000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000007273006263006263000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000007273007273000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
