pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

function _init()
	flakes = {}
	gt = 0
end

function _update()
 gt += 1
 
	if btn(4) then
		add_snow()
	end
	
	if rnd(1) < 0.1 then
		add_snow()
	end
	
	if gt%10 then
		for flk in all(flakes) do
			flk:update()
		end
	end
end

function _draw()
	cls()
	for flk in all(flakes) do
		flk:draw()
	end
end

-->8

function add_snow()
	local x = rnd(128)
	local y = -1
	local big = false
	if rnd(1) > 0.8 then
		big = true
	end
	add(flakes, {
		x = x,
		y = y,
		big = big,
		update = function(self)
			if (rnd(1) < 0.03) self.x += sgn(rnd(2)-1)
			self.y	+= 0.1
			if (self.y > 127) del(flakes, self)
		end,
		draw = function(self)
			if self.big then
				spr(1, self.x, self.y)
			else
				pset(self.x, self.y, 7)
			end
		end
	})
end
__gfx__
00000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
