pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

function _init()
	plr_x = 1
	plr_y = 1
	cam_x = -62
	cam_y = -62
	
	gt = 0
	
	left_step = true
	steps = {}
end

function _update()
	gt += 1
	hori_move = false
	vert_move = false
	dx = 0
	dy = 0
	if btn(0) then
  dx = -1
  vert_move = true
 end
	if btn(1) then
  dx = 1
  vert_move = true
 end
	if btn(2) then
  dy = -1
  hori_move = true
 end
	if btn(3) then
  dy = 1
  hori_move = true
 end
 
 plr_x += dx
 plr_y += dy
 cam_x += dx
 cam_y += dy
 
 if gt%5 == 0 then
 	add_footsteps()
 end
 
 for step in all(steps) do
 	step:update()
 end
end

function _draw()
	cls(7)
	camera(cam_x, cam_y)
	
	for step in all(steps) do
		step:draw()
	end
	
	spr(1, plr_x, plr_y)
end
-->8

function add_footsteps()
	if (not(vert_move) and not(hori_move)) return
	
	local x = plr_x+3
	local y = plr_y+7
	if left_step then
		left_step = false
	else
		left_step = true
	end
	printh(left_step)
	if vert_move then
		if left_step then
			y += 1
		else
			y -= 1
		end
	else
		if left_step then
			x += 1
		else
			x -= 1
		end
	end
	
	local dx = dx
	local dy = dy
	
	if dx != 0 and dy != 0 then
		dy = 0
	end

	add(steps, {
		x = x,
		y = y,
		dx = dx,
		dy = dy,
		lifespan = 30,
		draw = function(self)
			pset(self.x, self.y, 0)
			pset(self.x-self.dx, self.y-self.dy, 13)
		end,
		update = function(self)
			self.lifespan -= 1
			if (self.lifespan < 1) del(steps, self)
		end})
end
__gfx__
00000000001110007777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001f10000000707700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700001110007777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000011611000700007700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000411611407777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700011611007700070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001110007777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001010007777000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
